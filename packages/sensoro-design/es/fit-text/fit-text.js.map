{"version":3,"sources":["fit-text/fit-text.jsx"],"names":["React","FitText","arguments","updateQueued","nodes","Map","updateElementStyle","element","options","width","style","fontSize","Math","min","max","compressor","minFontSize","maxFontSize","handleBodyResize","widths","forEach","push","offsetWidth","i","_renderChildren","children","props","Children","map","child","cloneElement","ref","c","set","_childRef","window","requestAnimationFrame","addEventListener","removeEventListener","Component","defaultProps","Number","NEGATIVE_INFINITY","POSITIVE_INFINITY"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;IACMC,O;;;;;AACF,qBAAc;AAAA;;AAAA;;AACV,kFAASC,SAAT;AACA,UAAKC,YAAL,GAAoB,KAApB;AACA,UAAKC,KAAL,GAAa,IAAIC,GAAJ,EAAb;;AACA,UAAKC,kBAAL,GAA0B,UAACC,OAAD,EAAUC,OAAV,EAAmBC,KAAnB,EAA6B;AACnDF,MAAAA,OAAO,CAACG,KAAR,CAAcC,QAAd,aAA4BC,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,GAAL,CAASL,KAAK,IAAID,OAAO,CAACO,UAAR,GAAqB,EAAzB,CAAd,EAA4CP,OAAO,CAACQ,WAApD,CAAT,EAA2ER,OAAO,CAACS,WAAnF,CAA5B;AACH,KAFD;;AAGA,UAAKC,gBAAL,GAAwB,YAAM;AAC1B,YAAKf,YAAL,GAAoB,IAApB;AACA,UAAMgB,MAAM,GAAG,EAAf;;AACA,YAAKf,KAAL,CAAWgB,OAAX,CAAmB,UAACZ,OAAD,EAAUD,OAAV,EAAsB;AACrCY,QAAAA,MAAM,CAACE,IAAP,CAAYd,OAAO,CAACe,WAApB;AACH,OAFD;;AAGA,UAAIC,CAAC,GAAG,CAAR;;AACA,YAAKnB,KAAL,CAAWgB,OAAX,CAAmB,UAACZ,OAAD,EAAUD,OAAV,EAAsB;AACrC,cAAKD,kBAAL,CAAwBC,OAAxB,EAAiCC,OAAjC,EAA0CW,MAAM,CAACI,CAAD,CAAhD;;AACAA,QAAAA,CAAC,IAAI,CAAL;AACH,OAHD;AAIH,KAXD;;AAYA,UAAKC,eAAL,GAAuB,YAAM;AAAA,UACjBC,QADiB,GACJ,MAAKC,KADD,CACjBD,QADiB;AAEzB,aAAOzB,KAAK,CAAC2B,QAAN,CAAeC,GAAf,CAAmBH,QAAnB,EAA6B,UAACI,KAAD,EAAW;AAC3C,eAAO7B,KAAK,CAAC8B,YAAN,CAAmBD,KAAnB,EAA0B;AAC7BE,UAAAA,GAAG,EAAE,aAACC,CAAD,EAAO;AACR,gBAAIA,CAAJ,EAAO;AACH,oBAAK5B,KAAL,CAAW6B,GAAX,CAAeD,CAAf,EAAkB,MAAKN,KAAvB;AACH;;AACD,kBAAKQ,SAAL,GAAiBF,CAAjB;AACH;AAN4B,SAA1B,CAAP;AAQH,OATM,CAAP;AAUH,KAZD;;AAnBU;AAgCb;;;;yCACoB;AACjB,UAAI,CAAC,KAAK7B,YAAV,EAAwB;AACpBgC,QAAAA,MAAM,CAACC,qBAAP,CAA6B,KAAKlB,gBAAlC;AACH;;AACDiB,MAAAA,MAAM,CAACE,gBAAP,CAAwB,QAAxB,EAAkC,KAAKnB,gBAAvC;AACAiB,MAAAA,MAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC,KAAKnB,gBAArC;AACH;;;yCACoB;AACjB,WAAKA,gBAAL;AACH;;;2CACsB;AACnBiB,MAAAA,MAAM,CAACG,mBAAP,CAA2B,QAA3B,EAAqC,KAAKpB,gBAA1C;AACAiB,MAAAA,MAAM,CAACG,mBAAP,CAA2B,MAA3B,EAAmC,KAAKpB,gBAAxC;AACH;;;6BACQ;AACL,aAAO,KAAKM,eAAL,GAAuB,CAAvB,CAAP;AACH;;;;EAlDiBxB,KAAK,CAACuC,S;;AAoD5BtC,OAAO,CAACuC,YAAR,GAAuB;AACnBzB,EAAAA,UAAU,EAAE,CADO;AAEnBC,EAAAA,WAAW,EAAEyB,MAAM,CAACC,iBAFD;AAGnBzB,EAAAA,WAAW,EAAEwB,MAAM,CAACE;AAHD,CAAvB;AAKA,eAAe1C,OAAf","sourcesContent":["import React from 'react';\nclass FitText extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.updateQueued = false;\n        this.nodes = new Map();\n        this.updateElementStyle = (element, options, width) => {\n            element.style.fontSize = `${Math.min(Math.max(width / (options.compressor * 10), options.minFontSize), options.maxFontSize)}px`;\n        };\n        this.handleBodyResize = () => {\n            this.updateQueued = true;\n            const widths = [];\n            this.nodes.forEach((options, element) => {\n                widths.push(element.offsetWidth);\n            });\n            let i = 0;\n            this.nodes.forEach((options, element) => {\n                this.updateElementStyle(element, options, widths[i]);\n                i += 1;\n            });\n        };\n        this._renderChildren = () => {\n            const { children } = this.props;\n            return React.Children.map(children, (child) => {\n                return React.cloneElement(child, {\n                    ref: (c) => {\n                        if (c) {\n                            this.nodes.set(c, this.props);\n                        }\n                        this._childRef = c;\n                    }\n                });\n            });\n        };\n    }\n    componentWillMount() {\n        if (!this.updateQueued) {\n            window.requestAnimationFrame(this.handleBodyResize);\n        }\n        window.addEventListener('resize', this.handleBodyResize);\n        window.addEventListener('load', this.handleBodyResize);\n    }\n    componentDidUpdate() {\n        this.handleBodyResize();\n    }\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.handleBodyResize);\n        window.removeEventListener('load', this.handleBodyResize);\n    }\n    render() {\n        return this._renderChildren()[0];\n    }\n}\nFitText.defaultProps = {\n    compressor: 1,\n    minFontSize: Number.NEGATIVE_INFINITY,\n    maxFontSize: Number.POSITIVE_INFINITY\n};\nexport default FitText;\n"],"file":"fit-text.js"}