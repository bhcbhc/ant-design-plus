{"version":3,"sources":["send-code/send-code.jsx"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","SendCode","props","timer","lastSecond","state","buttonText","initText","start","loading","startCountdown","runText","second","setState","setInterval","timeout","resetText","onEnd","clearInterval","nextProps","_a","rest","React","Component","defaultProps"],"mappings":"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","sourcesContent":["var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport Button from 'antd/es/button';\nimport { getTemplateText } from './utils';\nclass SendCode extends React.Component {\n    constructor(props) {\n        super(props);\n        this.timer = null;\n        this.lastSecond = 0;\n        this.state = {\n            buttonText: this.props.initText,\n            start: false,\n            loading: false\n        };\n        this.startCountdown = () => {\n            const { runText } = this.props;\n            let second = this.lastSecond ? this.lastSecond : this.props.second;\n            this.setState({\n                start: true,\n            });\n            if (!this.lastSecond) {\n                this.setState({\n                    buttonText: getTemplateText(runText, second),\n                });\n            }\n            this.timer = setInterval(() => {\n                second -= 1;\n                this.setState({\n                    buttonText: getTemplateText(runText, second),\n                });\n                if (second <= 0) {\n                    this.timeout();\n                }\n            }, 1000);\n        };\n        this.timeout = () => {\n            const { resetText, onEnd } = this.props;\n            // 设置为运行结束后文本\n            this.setState({\n                buttonText: resetText,\n                start: false,\n            });\n            if (this.timer) {\n                clearInterval(this.timer);\n            }\n            // 发出倒计时结束事件\n            onEnd && onEnd();\n        };\n    }\n    componentWillUnmount() {\n        if (this.timer) {\n            clearInterval(this.timer);\n        }\n    }\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.start) {\n            this.startCountdown();\n        }\n    }\n    render() {\n        const _a = this.props, { start, second, initText, resetText, runText, onEnd } = _a, rest = __rest(_a, [\"start\", \"second\", \"initText\", \"resetText\", \"runText\", \"onEnd\"]);\n        const { loading, buttonText } = this.state;\n        return (<Button loading={loading} disabled={this.state.start} {...rest}>\n        {buttonText}\n      </Button>);\n    }\n}\nSendCode.defaultProps = {\n    start: false,\n    second: 60,\n    initText: '获取验证码',\n    runText: '{%s}秒后重新获取',\n    resetText: '重新获取验证码',\n};\nexport default SendCode;\n"],"file":"send-code.js"}